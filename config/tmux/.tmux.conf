# -- Key Bindings

# Set custom prefix
set -g prefix C-w                # Change prefix key to C-w
unbind C-b                       # Unbind the default prefix (C-b)
bind-key C-w send-prefix         # Bind the new prefix key (C-w)

# Reload configuration
unbind r                         # Unbind the default key for reloading
bind r source-file ~/.tmux.conf  # Bind "r" to reload the configuration file

# Window and pane indexing
set -g base-index 1              # Start window index at 1 instead of 0
setw -g pane-base-index 1        # Start pane index at 1 instead of 0

# Reorder window numbers after deletion
set-option -g renumber-windows on

# Enable vi-style key bindings
set-window-option -g mode-keys vi

# Enable mouse support
set -g mouse on                  # Allow mouse for resizing, scrolling, and selecting panes

# Window splitting shortcuts
unbind %                         # Unbind default horizontal split
bind | split-window -h -c "#{pane_current_path}"  # Bind "|" to split window horizontally
unbind '"'                       # Unbind default vertical split
bind - split-window -v -c "#{pane_current_path}"  # Bind "-" to split window vertically

# Keep current path when creating new window
bind c new-window -c "#{pane_current_path}"

# Prevent programs from automatically renaming windows
set-option -g allow-rename off
set-option -g automatic-rename off

# Session selection shortcuts
bind s choose-tree -sZ -O name   # Show session list (sorted by name)

# Pane navigation shortcuts
bind j select-pane -D            # Navigate to the pane below
bind k select-pane -U            # Navigate to the pane above
bind l select-pane -R            # Navigate to the pane on the right
bind h select-pane -L            # Navigate to the pane on the left

# Pane resizing shortcuts
bind Down resize-pane -D 5       # Resize pane downward by 5 units
bind Up resize-pane -U 5         # Resize pane upward by 5 units
bind Right resize-pane -R 5      # Resize pane to the right by 5 units
bind Left resize-pane -L 5       # Resize pane to the left by 5 units


# -- Theme

# Configure the catppuccin plugin
set -g @catppuccin_flavor "mocha"
set -g @catppuccin_window_status_style "rounded"
set -g @catppuccin_window_text " #W"
set -g @catppuccin_window_current_text " #W"

# Load catppuccin
run ~/.config/tmux/plugins/catppuccin/tmux/catppuccin.tmux

# Make the status line pretty and add some modules
set -g status-right-length 100
set -g status-left-length 100
set -g status-left ""
set -g status-right "#{E:@catppuccin_status_application}"
set -agF status-right "#{E:@catppuccin_status_cpu}"
set -ag status-right "#{E:@catppuccin_status_session}"
set -ag status-right "#{E:@catppuccin_status_uptime}"
set -agF status-right "#{E:@catppuccin_status_battery}"

run ~/.config/tmux/plugins/tmux-plugins/tmux-cpu/cpu.tmux
run ~/.config/tmux/plugins/tmux-plugins/tmux-battery/battery.tmux

